- DDD 프로젝트를 진행할 때, 항상 그 안에는 다수의 바운디드 컨텍스트가 존재

  

- 이 바운디드 컨텍스트들 중 하나는 핵심 도메인이 될것이고, 다른 바운디드 컨텍스트에는 다양한 서브도메인이 존재할 것이다.

  

- 애자일 프로젝트 관리 핵심은 하나의 바운디드 컨텍스트와 하나의 서브도메인 모두를 포함한다는 것, 하나의 바운디드 컨텍스트 안에 다수의 서브도메인이 있을 수도 있는데, 이 경우 최적의 모델을 구성했다고 보기는 어렵다.



***

### 서브도메인은 무엇인가?

- 전체 비즈니스 도메인의 하위 부분

  

- 하나의 논리적인 도메인 모델을 나타내는 것이라고 생각할 수도 있다.

  

- 거대하고 복잡한 프로젝트에서 문제 영역을 이해할 수 있도록 전체 비즈니스 도메인을 논리적으로 쪼개는 데 서브도메인을 사용할 수도 있다.

  

- 또 다른 관점으로는 명확한 전문 지식 영역별로 정의하는 것인데, 특정 서브도메인에는 서브도메인을 활성화시킬 수 있도록 해당 비즈니스를 잘 이해하고 있는 한 명 이상의 도메인 전문가들이 있다는 것을 말한다.



***

### 서브 도메인의 유형

- 핵심 도메인 

  - 보편언어를 신중하게 만들기 위한 전략적 투자 영역, 주요 자원을 할당하는 명시적인 바운디드 컨텍스트이며, 잘 정의된 도메인 모델이 존재

    

  - 기업의 프로젝트 목록에서 높은 우선순위를 갖는다. (경쟁자들에 대한 차별화를 만들 영역)

    

  - 소프트웨어에서 가장 큰 투자가 필요한 곳

    

- 지원 서브 도메인

  - 이미 존재하는 제품으로 해결할 수 없는 맞춤 제작 개발이 필요한 모델링 영역을 말한다.

    

  - 전략적 차별화를 위해 투자한 것에 실패하지 않으면서도 지원 형태의 바운디드 컨텍스트에 너무 큰 투자를 하지 않 기 위해 아웃소싱을 고려해볼 수도 있다.

    

  - 지원 서브도메인 없이 핵심 도메인을 성공시킬 수는 없기 때문에 이는 여전히 중요한 소프트웨어 모델이다.

    

- 일반 서브도메인

  - 기존 제품 구매를 통해 바로 충족시킬 수 있는 경우에 해당

    

  - 아웃소싱을 할 수도 있고, 핵심 도메인 또는 좀 더 작은 지원 서브도메인에 할당된, 엘리트 개발자가 없는 팀에서 직접 개발할 수도 있다.

    

  - 일반 서브도메인을 핵심 도메인으로 오해하지 않도록 주의 해야 한다. 일반 서브도메인에 핵심 도메인만큼 투자를 원하지 않기 때문이다.



***

### 복잡성 다루기

- 비즈니스 도메인 안의 시스템 경계 중 일부

  - 레거시 시스템일 가능성
  - 기업이 직접 만들었을 수도 있음
  - 소프트웨어 라이센스를 구매했을 수도 있다.

  

- 여전히 그 시스템들이 핵심 도메인 프로젝트에 어떤 영향을 주고 있는지 명확히 해야 한다.

  - 문제 영역에 대해 논의하기 위한 도구로 서브도메인을 사용해야 한다.

  

- 실제 상황에서 일부 레거시 시스템들은 바운디드 컨텍스트를 기반으로 설계하는 DDD의 방향과는 상충되기 때문에 제한된 경계가 없는(Unbounded) 레거시 시스템으로 여길 수 밖에 없다.

  - 분리해서 설계와 구현했어야만 하는, 무질서하고 복잡해서 엉망징찬인 여러 개의 뒤엉킨 모델들이 현실에는 한 시스템에 한가득..

  

- 레거시 시스템을 논할 때, 그 안에 몇 개 혹은 더 많은 논리적(Logical) 도메인 모델이 존재한다면, 이것을 서브도메인으로 생각해볼 수도 있다.

  

- 구분된 보편언어를 머릿속에 떠올려보면, 최소한 이 레거시 시스템들을 어떻게 통합해야 할지 이해하는 데 도움이 되기 때문에 레거시 시스템이 조금은 덜 딱딱하고, 덜 뭉쳐진 것처럼 느껴질 것이다.

  

- 서브 도메인을 활용해서 레거시 시스템을 바라보고 논의해봄으로써 얼기설기 얽혀 있는 거대한 모델이라는 어려운 현실을 극복해볼 수 있다.

  - 비즈니스에 중요도를 따져 작업 우선순위를 정할 수 있다.

    

- __DDD를 사용할 때, 바운디드 컨텍스트와 서브도메인은 일대일(1:1) 관계를 맺어야 한다. 하나의 바운디드 컨텍스트 안에 오직 1개의 서브도메인 모델을 두는 것을 목표로 한다.__

  - 바운디드 컨텍스트를 정확하게 유지시키고, 핵심 전략 목표에 집중하는데 도움을 준다.

  

- __핵심 도메인 안에 존재하는 동일한 바운디드 컨텍스트 안에 다른 모델을 만들어야 하는 상황이라면, 핵심 도메인으로부터 완전히 분리된 모듈(IDDD) 형태로 그 모델을 별도의 영역에 정의해야 한다.__ 

  - 모듈은 기본적으로 스칼라와 자바의 패키지에 해당, F#과 C#은 네임스페이스에 해당한다.
  - 하나의 모델이 핵심을 이루고, 다른 모델들은 지원하는 역할이라는 구성을 명확하게 나타낸다.

